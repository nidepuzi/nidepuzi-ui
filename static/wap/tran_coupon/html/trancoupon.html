<!DOCTYPE html>
<html lang="zh-CN">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>个人中心</title>

    <!-- Bootstrap -->
    <link href="//cdn.bootcss.com/bootstrap/3.3.5/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" type="text/css" href="../css/personal.css">
    <!-- HTML5 shim and Respond.js for IE8 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="//cdn.bootcss.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="//cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <div class="container" id="id-container">
      <div>
      <div style="width:65%;display:inline-block;vertical-align:middle">
      <ul class="nav nav-tabs" role="tablist" id="id-tab">
        <li role="presentation" class="active"><a href="#" hide-tag="list-out-coupons" show-tag="list-in-coupons"><b>入券</b></a></li>
        <li role="presentation" ><a href="#" hide-tag="list-in-coupons" show-tag="list-out-coupons"><b>出券</b></a></li>
      </ul>
      </div>
      <div style="width:30%;display:inline-block;vertical-align:middle">
        <div class="dropdown" id="id-dropdown">
        <button class="btn btn-default dropdown-toggle" type="button" id="id-dropdown-button" data-toggle="dropdown">筛选 <span class="caret"></span></button>
        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenu1" id="id-dropdown-menu">
            <li role="presentation"><a role="menuitem" status="1" href="#">待审核</a></li>
            <li role="presentation"><a role="menuitem" status="2" href="#">待发送</a></li>
            <li role="presentation"><a role="menuitem" status="3" href="#">已完成</a></li>
            <li role="presentation"><a role="menuitem" status="4" href="#">已取消</a></li>  
        </ul>
        </div>
      </div>
      </div>

      <div>
      <p>您还有&nbsp;<span class="coupon-number">36</span>&nbsp;张精品券！</p>
      </div>
      <div id="id-place-order">
        <div class="input-group">
          <span class="input-group-addon">立即订购</span>
          <input type="number" class="form-control" placeholder="eg. 6" id="id-number">
          <span class="input-group-addon">张券！</span>
          <span class="input-group-btn">
            <button class="btn btn-warning" type="button" onClick="requestTransfer()">确定提交</button>
          </span>
        </div>
      </div>
      <hr/>
      <div id="id-list-out-coupons"></div>
      <div id="id-list-in-coupons"></div>      

    </div>
    
    <!-- jQuery (necessary for Bootstrap's JavaScript plugins) -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <!-- Include all compiled plugins (below), or include individual files as needed -->
    <script src="//cdn.bootcss.com/jquery/1.11.3/jquery.min.js"></script>
    <script src="http://cdn.bootcss.com/bootstrap/3.3.0/js/bootstrap.min.js"></script>
    <script>
      $(function() {
        //$(".dropdown-toggle").dropdown('toggle');
      });

      function changeFilterText(value) {
        var text = "筛选";
        if (value == "1") {
          text = "待审核";
        } else if (value == "2") {
          text = "待发送";
        } else if (value == "3") {
          text = "已完成";
        } else if (value == "4") {
          text = "已取消";
        }
        $("#id-dropdown-button")[0].innerHTML= text+' <span class="caret"></span>';
      }

      var globalShowTag = 'list-in-coupons';
      var globalTransferStatus = '';

      $("#id-dropdown-menu").click(function (e){
          var elem = e.target;
          var status = elem.getAttribute("status");
          if (globalTransferStatus != status) {
            globalTransferStatus = status;
            changeFilterText(status);
            if (globalShowTag == 'list-out-coupons') {
              listOutCoupons(globalTransferStatus);
            } else if (globalShowTag == 'list-in-coupons') {
              listInCoupons(globalTransferStatus);
            }            
          }
      });


      $('#id-tab a').click(function (e) {
        e.preventDefault();
        $(this).tab('show');
        var hideTag = $(this).attr("hide-tag");
        var showTag = $(this).attr("show-tag");

        if (showTag && showTag != globalShowTag) {
          globalShowTag = showTag;
          globalTransferStatus = '';
          changeFilterText();
          
          if (showTag == 'list-out-coupons') {
            listOutCoupons(globalTransferStatus);
          } else if (showTag == 'list-in-coupons') {
            listInCoupons(globalTransferStatus);
          }
        
          if (hideTag) {
            $("#id-"+hideTag).hide();
          }
          if (showTag) {
            $("#id-"+showTag).show();
          }
        }
      });
    </script>
    <script src="../js/coupon.js"></script>
  </body>
</html>


